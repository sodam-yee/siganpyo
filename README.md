import streamlit as st

st.set_page_config(page_title="í•™êµ ì‹œê°„í‘œ ì•±", layout="wide")

# ===================================================
# ì‚¬ì´ë“œë°”
# ===================================================
st.sidebar.title("ğŸ“Œ ë©”ë‰´")
page = st.sidebar.radio("í˜ì´ì§€ ì„ íƒ", ["ğŸ“… ì‹œê°„í‘œ", "ğŸ—“ í•™ì‚¬ì¼ì •"])

# ===================================================
# ì‹œê°„í‘œ í˜ì´ì§€
# ===================================================
if page == "ğŸ“… ì‹œê°„í‘œ":

    st.title("ğŸ“… í•™êµ ì‹œê°„í‘œ")

    class_selected = st.selectbox("ë°˜ ì„ íƒ", ["2í•™ë…„ 2ë°˜"])
    st.divider()

    subject_lists = {
        "A": ["ê²½ì œ","ìƒëª…","ì„¸ê³„ì‚¬","ì„¸ê³„ì§€ë¦¬","ì‹¬í™”ì˜ì–´","ì¼ë³¸ì–´","ì£¼ì œë…ì„œ","í”„ë¡œê·¸ë˜ë°","ìœ¤ë¦¬","í™”í•™"],
        "B": ["ê²½ì œìˆ˜í•™","ë¬¼ë¦¬","ë¯¸ìˆ ","ìƒëª…","ì„¸ê³„ì§€ë¦¬","ì¼ë³¸ì–´","ì¤‘êµ­ì–´","ì§€êµ¬","í”„ë¡œê·¸ë˜ë°","ìœ¤ë¦¬","í™”í•™"],
        "C": ["ê²½ì œ","ë¬¼ë¦¬","ìƒëª…","ìŒì•…","ì¼ë³¸ì–´","ì¼ë³¸ì–´ íšŒí™”","ì£¼ì œë…ì„œ","ì§€êµ¬","ìœ¤ë¦¬","í™”í•™"],
        "D": ["ë¬¼ë¦¬","ë¯¸ìˆ ","ìƒëª…","ì„¸ê³„ì‚¬","ì¼ë³¸ì–´","ì •ì¹˜","í”„ë¡œê·¸ë˜ë°","ìœ¤ë¦¬","í™”í•™"]
    }

    class_assignment = {
        "A": {"ì£¼ì œë…ì„œ":"1ë°˜","ì‹¬í™”ì˜ì–´":"2ë°˜","ê²½ì œ":"3ë°˜","ì„¸ê³„ì§€ë¦¬":"4ë°˜",
              "ìœ¤ë¦¬":"5ë°˜","ì„¸ê³„ì‚¬":"6ë°˜","í™”í•™":"7ë°˜","ìƒëª…":"8ë°˜",
              "ì¼ë³¸ì–´":"9ë°˜","í”„ë¡œê·¸ë˜ë°":"11ë°˜"},
        "B": {"ì¤‘êµ­ì–´":"11ë°˜","í”„ë¡œê·¸ë˜ë°":"10ë°˜","ë¯¸ìˆ ":"9ë°˜","ì§€êµ¬":"8ë°˜",
              "ìƒëª…":"7ë°˜","í™”í•™":"6ë°˜","ë¬¼ë¦¬":"5ë°˜","ìœ¤ë¦¬":"4ë°˜",
              "ì„¸ê³„ì§€ë¦¬":"3ë°˜","ì¼ë³¸ì–´":"2ë°˜","ê²½ì œìˆ˜í•™":"1ë°˜"},
        "C": {"ê²½ì œ":"1ë°˜","ì£¼ì œë…ì„œ":"2ë°˜","ìœ¤ë¦¬":"3ë°˜","ìŒì•…":"4ë°˜",
              "ì¼ë³¸ì–´":"5ë°˜","ë¬¼ë¦¬":"6ë°˜","ì§€êµ¬":"7ë°˜",
              "í™”í•™":"9ë°˜","ìƒëª…":"10ë°˜","ì¼ë³¸ì–´ íšŒí™”":"11ë°˜"},
        "D": {"ë¯¸ìˆ ":"10ë°˜","ìƒëª…":"9ë°˜","í™”í•™":"8ë°˜","ë¬¼ë¦¬":"7ë°˜",
              "ìœ¤ë¦¬":"6ë°˜","ì„¸ê³„ì‚¬":"4ë°˜","í”„ë¡œê·¸ë˜ë°":"3ë°˜",
              "ì •ì¹˜":"2ë°˜","ì¼ë³¸ì–´":"1ë°˜"}
    }

    st.subheader("ğŸ“˜ ì„ íƒê³¼ëª© ì„¤ì •")

    selected = []

    def select_subject(label):
        options = ["ì„ íƒì•ˆí•¨"] + subject_lists[label]
        choice = st.selectbox(f"{label} ì„ íƒ", options, key=label)
        if choice != "ì„ íƒì•ˆí•¨":
            if choice in selected:
                st.warning("ì´ë¯¸ ì„ íƒëœ ê³¼ëª©ì…ë‹ˆë‹¤.")
                return "ì„ íƒì•ˆí•¨"
            selected.append(choice)
        return choice

    col1, col2, col3, col4 = st.columns(4)
    with col1: A = select_subject("A")
    with col2: B = select_subject("B")
    with col3: C = select_subject("C")
    with col4: D = select_subject("D")

    st.divider()

    base_table = {
        "ì›”": ["A", "C", "ëŒ€ìˆ˜", "B", "D", "ë¬¸í•™", "ì˜ì–´"],
        "í™”": ["ë¬¸í•™", "A", "D", "ëŒ€ìˆ˜", "B", "ì˜ì–´", "ìƒëª…"],
        "ìˆ˜": ["ì˜ì–´", "D", "ëŒ€ìˆ˜", "ì²´ìœ¡", "ë¬¸í•™", "C"],
        "ëª©": ["ì²´ìœ¡", "B", "ì§„ë¡œ", "C", "ë¬¸í•™", "A", "D"],
        "ê¸ˆ": ["ëŒ€ìˆ˜", "A", "B", "ì˜ì–´", "ì°½ì²´", "ì°½ì²´"]
    }

    replace_map = {"A":A,"B":B,"C":C,"D":D}

    # ê³¼ëª© ì¹˜í™˜
    for day in base_table:
        for i in range(len(base_table[day])):
            subject = base_table[day][i]
            if subject in replace_map and replace_map[subject] != "ì„ íƒì•ˆí•¨":
                chosen = replace_map[subject]
                assigned = class_assignment[subject].get(chosen,"")
                subject = f"{chosen}\n({assigned})"
            base_table[day][i] = subject

    st.subheader("ğŸ“– ì‹œê°„í‘œ")

    days = ["", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ"]

    # ğŸ”¥ ì™„ì „ ê³ ì • í­ (ë¹„ìœ¨ ê³ ì •)
    col_widths = [1, 2, 2, 2, 2, 2]

    # í—¤ë”
    cols = st.columns(col_widths)
    for col, day in zip(cols, days):
        col.markdown(f"**{day}**")

    # ë³¸ë¬¸
    for period in range(7):
        cols = st.columns(col_widths)
        cols[0].markdown(f"**{period+1}êµì‹œ**")

        for i, day in enumerate(["ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ"]):
            try:
                value = base_table[day][period]
            except:
                value = ""
            cols[i+1].write(value)

# ===================================================
# í•™ì‚¬ì¼ì •
# ===================================================
elif page == "ğŸ—“ í•™ì‚¬ì¼ì •":
    st.title("ğŸ—“ í•™ì‚¬ì¼ì •")
    st.info("í•™ì‚¬ì¼ì • í˜ì´ì§€ëŠ” ë‹¤ìŒ ë‹¨ê³„ì—ì„œ ì œì‘í•  ì˜ˆì •ì…ë‹ˆë‹¤ ğŸ˜Š")